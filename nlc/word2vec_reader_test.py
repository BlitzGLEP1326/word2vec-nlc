import unittest
import os
from .word2vec_reader import Word2VecReader


class Word2VecReaderTest(unittest.TestCase):
    """
    Word2Vec model test
    """
    def test_reading(self):
        path = os.path.join(os.path.dirname(__file__), "test", "glove.6B.50d.bin")
        model = Word2VecReader(path)
        right = [
            0.4180000126361847, 0.24967999756336212, -0.41242000460624695, 0.1216999962925911,
            0.3452700078487396, -0.044456999748945236, -0.4968799948692322, -0.17861999571323395,
            -0.0006602299981750548, -0.6565999984741211, 0.2784300148487091, -0.14767000079154968,
            -0.5567700266838074, 0.14657999575138092, -0.009509500116109848, 0.011657999828457832,
            0.10204000025987625, -0.127920001745224, -0.8442999720573425, -0.12180999666452408,
            -0.016800999641418457, -0.33278998732566833, -0.15520000457763672, -0.23130999505519867,
            -0.1918099969625473, -1.8823000192642212, -0.7674599885940552, 0.09905099868774414,
            -0.42124998569488525, -0.19526000320911407, 4.0071001052856445, -0.1859399974346161,
            -0.5228700041770935, -0.3168100118637085, 0.0005921300034970045, 0.007444899994879961,
            0.17778000235557556, -0.15896999835968018, 0.012040999718010426, -0.05422300100326538,
            -0.2987099885940552, -0.15749000012874603, -0.3475799858570099, -0.04563700035214424,
            -0.4425100088119507, 0.1878499984741211, 0.002784899901598692, -0.18411000072956085,
            -0.11513999849557877, -0.7858099937438965]
        the_vector = model['the']
        delta = 0.0
        for i in range(0, len(the_vector)):
            delta += abs(the_vector[i] - right[i])
        self.assertLess(delta, 0.05)
